<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>给宝宝的小情书</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  min-height: 100vh;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  overflow: hidden;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
}

#canvas {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 1;
}

.popup {
  position: fixed;
  background: rgba(255, 255, 255, 0.95);
  border-radius: 12px;
  padding: 15px 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  font-size: 14px;
  color: #333;
  cursor: move;
  user-select: none;
  z-index: 10;
  opacity: 0;
  transform: scale(0.5);
  transition: opacity 0.5s ease, transform 0.5s ease;
  max-width: 80vw;
  word-wrap: break-word;
}

.popup.show {
  opacity: 1;
  transform: scale(1);
}

.popup .close {
  position: absolute;
  top: 5px;
  right: 8px;
  width: 20px;
  height: 20px;
  background: #ff4757;
  color: white;
  border: none;
  border-radius: 50%;
  cursor: pointer;
  font-size: 12px;
  line-height: 20px;
  text-align: center;
}

.controls {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 10px;
  z-index: 100;
}

.controls button {
  padding: 12px 24px;
  background: rgba(255, 255, 255, 0.9);
  border: none;
  border-radius: 25px;
  font-size: 16px;
  font-weight: bold;
  cursor: pointer;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
  transition: all 0.3s;
}

.controls button:active {
  transform: scale(0.95);
}

@media (max-width: 768px) {
  .popup {
    font-size: 12px;
    padding: 12px 16px;
    max-width: 70vw;
  }
  
  .controls button {
    padding: 10px 20px;
    font-size: 14px;
  }
}
</style>
</head>
<body>

<canvas id="canvas"></canvas>
<div class="controls">
  <button onclick="startAnimation()">开始</button>
  <button onclick="clearAll()">清空</button>
</div>

<script>
  // 200条不重复的简短表白和关心语句
const messages = [
  "我想你了", "我喜欢你", "我爱你", "想你", "爱你",
  "喜欢你", "超喜欢你", "好爱你", "真的想你", "抱抱你",
  "亲亲你", "想见你", "想陪你", "陪着你", "晚安",
  "早安", "想你啦", "爱你哦", "喜欢你呀", "你真好",
  
  // 关心身体健康
  "记得吃饭", "记得喝水", "记得休息", "别熬夜", "早点睡",
  "照顾好自己", "注意身体", "好好的", "多喝热水", "按时吃饭",
  "别饿着自己", "累了就休息", "困了就睡", "别太累", "注意保暖",
  "天冷加衣服", "别着凉了", "多穿点", "出门带伞", "路上小心",
  
  // 关心情绪
  "你辛苦了", "你累吗", "你还好吗", "你开心吗", "你想我吗",
  "我在这儿", "我一直在", "我在等你", "我在爱你", "我好想你啊",
  "别怕", "别哭", "别难过", "别生气", "我在呢",
  "有我在", "别担心", "会好的", "别着急", "慢慢来",
  "你很棒", "你可以的", "相信你", "加油", "我支持你",
  
  // 温柔表白
  "你最好", "你最棒", "好想抱你", "好想亲你", "我在想你",
  "一直想你", "天天想你", "时时想你", "刻刻想你", "你是我的宝贝",
  "你是我的心肝", "你是我的全部", "你让我心动", "你让我着迷", "和你在一起真好",
  "有你真幸福", "遇见你真好", "认识你真好", "爱上你了", "想牵你的手",
  
  // 关心日常
  "吃了吗", "睡了吗", "在忙吗", "在干嘛", "想和你聊天",
  "今天开心吗", "今天累吗", "工作顺利吗", "一切都好吗", "有没有想我",
  "记得想我", "记得爱我", "想我了就说", "需要我就在", "随时找我",
  
  // 深情告白
  "想抱紧你", "想吻你", "想和你在一起", "想永远陪你", "你笑起来真好看",
  "你的眼睛真美", "你真可爱", "你真温柔", "你真美", "你是最好的",
  "你是最美的", "你是独一无二的", "你是我的唯一", "只爱你", "每天都想你",
  
  // 贴心关怀
  "别太拼了", "别太辛苦", "要爱惜自己", "身体最重要", "健康第一",
  "心情不好就说", "难过就找我", "开心告诉我", "分享给我", "我想听",
  "我会听你说", "我会陪着你", "我会等你", "我会守护你", "我会爱你",
  
  // 甜蜜情话
  "分分秒秒想你", "无时无刻不想你", "做梦都梦到你", "满脑子都是你", "我好想你呀",
  "我真的爱你", "我永远爱你", "我只爱你", "我的心里只有你", "想抱你",
  "想亲你", "想你想到睡不着", "想你想到心疼", "想你想得厉害", "你让我心跳加速",
  
  // 温暖陪伴
  "你让我脸红", "你让我害羞", "听到你就开心", "看到你就开心", "你是我的小宝贝",
  "你是我的心上人", "你是我的小可爱", "你是我的小甜心", "你是我的小公主", "想把你藏起来",
  "想把你抱紧", "想把你宠坏", "想把你捧在手心", "想把你放心上", "你对我真好",
  
  // 日常关心
  "和你说话真舒服", "和你在一起真自在", "和你聊天真开心", "有你真幸福", "我的眼里心里都是你",
  "我满脑子都是你", "我一天到晚想你", "你笑起来像阳光", "你的声音好听", "我想永远和你在一起",
  "我想一直陪你", "我想守护你一辈子", "我想爱你到永远", "我想和你到老", "你是我见过最好的",
  
  // 体贴入微
  "你是我最珍贵的", "你是我最重要的", "想牵你手", "想摸你头", "你的每句话我都记得",
  "你的笑容我都喜欢", "你的一切我都爱", "我会一直陪你", "我会一直爱你", "你开心我就开心",
  "你快乐我就快乐", "你幸福我就幸福", "遇见你是幸运", "认识你是福气", "你的笑容治愈我",
  
  // 深情守护
  "你的声音温暖我", "你的存在感动我", "我想给你全世界", "我想给你最好的", "你是我的动力",
  "你是我的希望", "你是我的光", "你是我的温暖", "你是我的依靠", "想和你看日出",
  "想和你看日落", "想和你看星星", "想和你看月亮", "想和你看雪", "想和你吃饭",
  
  // 温柔承诺
  "想和你散步", "想和你旅行", "想和你做梦", "想和你变老", "我会保护你",
  "我会心疼你", "我会理解你", "我会支持你", "我会信任你", "你累了就靠我",
  "你难过就找我", "你需要我就在", "宝贝我爱你", "宝贝想你了", "宝贝晚安",
  
  // 甜蜜昵称
  "宝贝早安", "宝贝抱抱", "超级喜欢你", "超级爱你", "超级想你",
  "真的好喜欢你", "真的好爱你", "你是我的小心肝", "你是我的小月亮", "你是我的小星星",
  "你是我的小太阳", "你是我的小天使", "今天也想你", "今天也爱你", "今天也喜欢你",
  
  // 最后的爱意
  "想你呀", "爱你呀", "喜欢你呀", "抱你呀", "亲你呀",
  "想死你了", "爱死你了", "永远爱你", "一生爱你", "此生只爱你"
];
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');

let width = canvas.width = window.innerWidth;
let height = canvas.height = window.innerHeight;

window.addEventListener('resize', () => {
  width = canvas.width = window.innerWidth;
  height = canvas.height = window.innerHeight;
});

let popupIndex = 0;
let animationId = null;
let usedMessages = [];

// 爱心路径点计算
function getHeartPoints(centerX, centerY, size) {
  const points = [];
  const steps = 200; // 200个点组成爱心
  
  for (let i = 0; i < steps; i++) {
    const t = (i / steps) * Math.PI * 2;
    const x = size * 16 * Math.pow(Math.sin(t), 3);
    const y = -size * (13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t));
    
    points.push({
      x: centerX + x,
      y: centerY + y
    });
  }
  
  return points;
}

// 获取唯一消息
function getUniqueMessage() {
  if (usedMessages.length >= messages.length) {
    usedMessages = [];
  }
  
  let availableMessages = messages.filter(msg => !usedMessages.includes(msg));
  let message = availableMessages[Math.floor(Math.random() * availableMessages.length)];
  usedMessages.push(message);
  
  return message;
}

// 创建弹窗
function createPopup(x, y, message) {
  const popup = document.createElement('div');
  popup.className = 'popup';
  popup.innerHTML = `
    ${message}
    <button class="close" onclick="this.parentElement.remove()">×</button>
  `;
  
  popup.style.left = x + 'px';
  popup.style.top = y + 'px';
  
  document.body.appendChild(popup);
  
  setTimeout(() => popup.classList.add('show'), 10);
  
  // 拖拽功能
  let isDragging = false;
  let currentX, currentY, initialX, initialY;
  
  popup.addEventListener('mousedown', dragStart);
  popup.addEventListener('touchstart', dragStart);
  
  function dragStart(e) {
    if (e.target.classList.contains('close')) return;
    
    isDragging = true;
    
    if (e.type === 'touchstart') {
      initialX = e.touches[0].clientX - popup.offsetLeft;
      initialY = e.touches[0].clientY - popup.offsetTop;
    } else {
      initialX = e.clientX - popup.offsetLeft;
      initialY = e.clientY - popup.offsetTop;
    }
    
    document.addEventListener('mousemove', drag);
    document.addEventListener('touchmove', drag);
    document.addEventListener('mouseup', dragEnd);
    document.addEventListener('touchend', dragEnd);
  }
  
  function drag(e) {
    if (!isDragging) return;
    
    e.preventDefault();
    
    if (e.type === 'touchmove') {
      currentX = e.touches[0].clientX - initialX;
      currentY = e.touches[0].clientY - initialY;
    } else {
      currentX = e.clientX - initialX;
      currentY = e.clientY - initialY;
    }
    
    popup.style.left = currentX + 'px';
    popup.style.top = currentY + 'px';
  }
  
  function dragEnd() {
    isDragging = false;
    document.removeEventListener('mousemove', drag);
    document.removeEventListener('touchmove', drag);
    document.removeEventListener('mouseup', dragEnd);
    document.removeEventListener('touchend', dragEnd);
  }
}

// 开始动画
function startAnimation() {
  clearAll();
  popupIndex = 0;
  usedMessages = [];
  
  const centerX = width / 2;
  const centerY = height / 2;
  const size = Math.min(width, height) / 40; // 适应屏幕大小
  
  const heartPoints = getHeartPoints(centerX, centerY, size);
  
  function showNextPopup() {
    if (popupIndex < heartPoints.length) {
      const point = heartPoints[popupIndex];
      const message = getUniqueMessage();
      
      createPopup(point.x, point.y, message);
      
      popupIndex++;
      animationId = setTimeout(showNextPopup, 200); // 每200ms出现一个，速度适中
    }
  }
  
  showNextPopup();
}

// 清空所有弹窗
function clearAll() {
  if (animationId) {
    clearTimeout(animationId);
    animationId = null;
  }
  
  const popups = document.querySelectorAll('.popup');
  popups.forEach(popup => popup.remove());
  
  popupIndex = 0;
  usedMessages = [];
}

// 页面加载完成后自动开始
window.addEventListener('load', () => {
  setTimeout(startAnimation, 500);
});
</script>

</body>
</html>
